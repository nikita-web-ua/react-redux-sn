(this["webpackJsonpreact-1"]=this["webpackJsonpreact-1"]||[]).push([[6],{432:function(e,t,n){"use strict";n.r(t);var c=n(25),s=n(3),r=n(434),a=n(402),i=n(403),o=n(436),u=n(429),j=n(401),l=n(399),d=n(437),b=n(0),v=n(19),O=n(167),f=n(1),h=r.a.TextArea,x=function(){var e=Object(b.useState)(null),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(b.useEffect)((function(){var e,t=function(){console.log("SOCKET CLOSED"),setTimeout(n,3e3)};function n(){var n;null===(n=e)||void 0===n||n.removeEventListener("close",t),(e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx")).addEventListener("close",t),c(e)}return n(),function(){e.removeEventListener("close",t),e.close()}}),[]),Object(f.jsxs)(o.b,{direction:"vertical",style:{width:"100%"},children:[Object(f.jsx)(p,{socket:n}),Object(f.jsx)(E,{socket:n})]})},p=function(e){var t=e.socket,n=Object(b.useState)([]),r=Object(s.a)(n,2),a=r[0],i=r[1];return Object(b.useEffect)((function(){var e=function(e){var t=JSON.parse(e.data);i((function(e){return[].concat(Object(c.a)(e),Object(c.a)(t))}))};return null===t||void 0===t||t.addEventListener("message",e),function(){return null===t||void 0===t?void 0:t.removeEventListener("message",e)}}),[t]),Object(f.jsx)("div",{style:{height:"calc(100vh - 250px)",overflowY:"auto"},children:a.map((function(e,t){return Object(f.jsx)(m,{message:e},t)}))})},m=function(e){var t=e.message;return Object(f.jsxs)("div",{children:[Object(f.jsxs)(o.b,{children:[Object(f.jsx)(u.a,{size:"large",src:t.photo}),Object(f.jsx)("b",{children:t.userName})]}),Object(f.jsx)("div",{children:Object(f.jsx)("p",{children:t.message})}),Object(f.jsx)(j.a,{})]})},E=function(e){var t=e.socket,n=Object(b.useState)(""),c=Object(s.a)(n,2),r=c[0],o=c[1],u=Object(b.useState)("pending"),j=Object(s.a)(u,2),v=j[0],O=j[1];Object(b.useEffect)((function(){var e=function(){return O("ready")};return null===t||void 0===t||t.addEventListener("open",e),function(){return null===t||void 0===t?void 0:t.removeEventListener("open",e)}}),[t]);return Object(f.jsxs)(a.a,{justify:"space-between",children:[Object(f.jsx)(i.a,{span:19,children:Object(f.jsx)(h,{onChange:function(e){return o(e.currentTarget.value)},value:r})}),Object(f.jsx)(i.a,{span:4,children:Object(f.jsxs)(l.a,{disabled:null===t||"ready"!==v,type:"primary",onClick:function(){r&&(null===t||void 0===t||t.send(r),o(""))},children:[Object(f.jsx)(d.a,{})," Send"]})})]})};t.default=Object(v.d)(O.a)((function(){return Object(f.jsx)(a.a,{justify:"center",style:{overflowY:"auto"},children:Object(f.jsx)(i.a,{span:12,children:Object(f.jsx)(x,{})})})}))}}]);
//# sourceMappingURL=6.0c236067.chunk.js.map